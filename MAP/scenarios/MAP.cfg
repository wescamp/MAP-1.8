#textdomain wesnoth-MAP

[scenario]
	id=MAP
	next_scenario=null
	name=_ "Modifiable Android Project"
	map_data="{~add-ons/MAP/maps/MA_Project.map}"
	turns=-1
	
	# show the storyline...
	
	[story]
		[part]
			story=_ "The year is 4032... In a very distant galaxy, there is very large, unexplored, planet... Simply known as 'YS-0-KOP'. Very little is known about this planet."
			show_title=yes
			background=map_space.png
		[/part]
		[part]
			story=_ "The 'Falcon XVI' (A exploration spaceship) has been sent to the planet to explore and look for any form of intelligent life. They find what looks to be a cave on the planets surface."
			show_title=yes
			background=map_space.png
			{NEW_JOURNEY 32 460}
			{NEW_JOURNEY 70 440}
			{NEW_JOURNEY 130 420}
			{NEW_JOURNEY 200 400}
			{NEW_JOURNEY 256 380}
			{NEW_BATTLE 300 360}
		[/part]
		[part]
			story=_ "They decide to send an android on a small ship down to the planet to investigate. The android was programmed to terminate any threats if anything became hostile to it's survival."
			show_title=yes
			background=map_space.png
			{OLD_JOURNEY 32 460}
			{OLD_JOURNEY 70 440}
			{OLD_JOURNEY 130 420}
			{OLD_JOURNEY 200 400}
			{OLD_JOURNEY 256 380}
			{OLD_BATTLE 300 360}
		[/part]
		[part]
			story=_ "Armed with a simple energy cannon, the android was sent to the cave. What will the android encounter along the way? What will be discover about the planet? So many questions, with very little answers... Continue the game to find out..."
			show_title=yes
			background=map_space.png
			{OLD_JOURNEY 32 460}
			{OLD_JOURNEY 70 440}
			{OLD_JOURNEY 130 420}
			{OLD_JOURNEY 200 400}
			{OLD_JOURNEY 256 380}
			{OLD_BATTLE 300 360}
			{NEW_JOURNEY 340 340}
			{NEW_BATTLE 360 320}
		[/part]
	[/story]
	
	# setup music/underground...
	
	{UNDERGROUND}
	[music]
		name=underground.ogg
	[/music]
	
	# setup sides...
	
	[side]
		id=Android
		side=1
		canrecruit=yes
		controller=human
		team_name="Android"
		gold=25
		income=-2
		fog=no
		shroud=yes
		type="Android"
		recruit=
	[/side]
	[side]
		side=2
		canrecruit=yes
		controller=ai
		team_name="Planet"
		gold=25
		income=-2
		fog=no
		shroud=yes
		type="Blade Guardian"
		recruit=
		# need to make ai agressive...
		[ai]
			aggression=1.0
			attack_depth=6
			caution=0.0
			leader_value=308.0
			grouping="no"
			simple_targeting=no
			support_villages=no
			[target]
				side=1
				canrecruit=yes
				value=308.0
			[/target]
		[/ai]
	[/side]
	
	# setup objectives...
	
	[event]
		name=prestart
		[objectives]
			side=0
			summary=_ "Explore this underground world found on the planet."
			note=_ "Hints/Tips: Right clicking will give you menu item to examine things or get help about this campaign."
			[objective]
				condition=win
				description=_ "Explore the underground world and return to the surface."
			[/objective]
			[objective]
				condition=lose
				description=_ "Death of Android."
			[/objective]
		[/objectives]
	[/event]
	
	# setup items/variables...
	
	[event]
		name=start
		
		# explain the scenario for newbs...
		
		[message]
			speaker=narrator
			message=_ "Hello, thanks for downloading/playing MAP or Modifiable Android Project. For those who do not know what the scenario is about, please read the following messages carefully. This explains how the game works and is played."
			caption=_ "Scenario Information 1"
			image="wesnoth-icon.png"
		[/message]
		[message]
			speaker=narrator
			message=_ "This scenario has a platform like style to it. Everytime you move or spot an enemy and you are in the air from moving, (Meaning, there is not a wall below you.) you will fall straight downward until you land on something. (a wall or enemy.)"
			caption=_ "Scenario Information 2"
			image="wesnoth-icon.png"
		[/message]
		[message]
			speaker=narrator
			message=_ "If you wish to understand the game a bit more, right click items/enemies to get some basic information about it. (A examine object menu item will show up. It will be an image of an eyeball.) If you move to the item/object, you may trigger an event relating to the object/item as well."
			caption=_ "Scenario Information 3"
			image="wesnoth-icon.png"
		[/message]
		[message]
			speaker=narrator
			message=_ "If you find yourself somewhere that looks too dangerous or impossible to pass, you may be going the wrong way. Turn around and explore the world some more. There are many upgrades around the world for you to become more powerful."
			caption=_ "Scenario Information 4"
			image="wesnoth-icon.png"
		[/message]
		[message]
			speaker=narrator
			message=_ "Finally, I would like to point out that you SHOULD use the save/reload/auto-save game function(s). If you don't, you will find yourself dead and cannot reload. (Meaning, you will have to start all over again...)"
			caption=_ "Scenario Information 5"
			image="wesnoth-icon.png"
		[/message]
		[message]
			speaker=narrator
			message=_ "In conclusion, this is the basic idea to the scenario/campaign. If you need any more help, please ask other players or me. Have fun, good luck, and good game. :)

~ SpoOkyMagician"
			caption=_ "Scenario Information Final"
			image="wesnoth-icon.png"
		[/message]
		
#ifdef EASY
		[message]
			speaker=narrator
			message=_ "(Currently, there is no difference with difficulty... Although, once it is changed, the description will go here...)"
			caption=_ "Easy Mode"
			image="items/ball-blue.png"
		[/message]
#endif
#ifdef NORMAL
		[message]
			speaker=narrator
			message=_ "(Currently, there is no difference with difficulty... Although, once it is changed, the description will go here...)"
			caption=_ "Normal Mode"
			image="items/ball-green.png"
		[/message]
#endif
#ifdef HARD
		[message]
			speaker=narrator
			message=_ "(Currently, there is no difference with difficulty... Although, once it is changed, the description will go here...)"
			caption=_ "Hard Mode"
			image="items/ball-magenta.png"
		[/message]
#endif
		{VARIABLE hook no}
		{VARIABLE boost no}
		{VARIABLE box no}
		{VARIABLE bolt_cannon no}
		{VARIABLE rock_cannon no}
		{VARIABLE water_cannon no}
		{VARIABLE lava_cannon no}
		{VARIABLE armor_a no}
		{VARIABLE armor_b no}
		{VARIABLE long_blade no}
		{VARIABLE area cave}
		[item]
			x,y=11,14
			image="items/sceptre-of-fire.png"
		[/item]
		[item]
			x,y=52,20
			image="items/brazier-lit1.png"
		[/item]
		[item]
			x,y=55,76
			image="items/box.png"
		[/item]
		[item]
			x,y=6,89
			image="items/key.png"
		[/item]
		[item]
			x,y=1,6
			image="items/key.png"
		[/item]
		[item]
			x,y=79,3
			image="items/key.png"
		[/item]
		[item]
			x,y=19,23
			image="items/chest-plain-closed.png"
		[/item]
		[item]
			x,y=47,2
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=19,6
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=96,3
			image="items/chest-plain-closed.png"
		[/item]
		[item]
			x,y=66,35
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=1,20
			image="items/chest-plain-closed.png"
		[/item]
		[item]
			x,y=100,46
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=94,41
			image="items/sceptre-of-fire.png"
		[/item]
		[item]
			x,y=83,62
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=85,94
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=53,85
			image="items/sceptre-of-fire.png"
		[/item]
		[item]
			x,y=2,94
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=51,59
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=59,11
			image="items/ball-blue.png"
		[/item]
		[item]
			x,y=72,42
			image="items/chest-plain-closed.png"
		[/item]
		[item]
			x,y=1,71
			image="items/chest-plain-closed.png"
		[/item]
		[item]
			x,y=69,58
			image="items/sceptre-of-fire.png"
		[/item]
		[item]
			x,y=88,59
			image="items/sceptre-of-fire.png"
		[/item]
		[item]
			x,y=3,67
			image="items/armor-golden.png"
		[/item]
		[item]
			x,y=47,19
			image="items/armor.png"
		[/item]
		[item]
			x,y=14,14
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=12,30
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=55,22
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=95,23
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=99,12
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=51,56
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=53,75
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=57,75
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=51,85
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=9,86
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=11,87
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=13,88
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=15,89
			image="items/dragonstatue.png"
		[/item]
		[item]
			x,y=17,90
			image="items/dragonstatue.png"
		[/item]
	[/event]
	
	# setup music...
	
	# cave...
	[event]
		name=moveto
		first_time_only=no
		[filter]
			x="1-100"
			y="1-18"
			side=1
			canrecruit=yes
		[/filter]
		{IF_VAR area not_equals cave (
			[then]
				[music]
					name=underground.ogg
					immediate=yes
				[/music]
				{VARIABLE area cave}
			[/then]
		)}
	[/event]
	
	# growth...
	[event]
		name=moveto
		first_time_only=no
		[filter]
			x="1-100"
			y="18-38"
			side=1
			canrecruit=yes
		[/filter]
		{IF_VAR area not_equals growth (
			[then]
				[music]
					name=traveling_minstrels.ogg
					immediate=yes
				[/music]
				{VARIABLE area growth}
			[/then]
		)}
	[/event]
	
	# water...
	[event]
		name=moveto
		first_time_only=no
		[filter]
			x="50-100"
			y="39-60"
			side=1
			canrecruit=yes
		[/filter]
		{IF_VAR area not_equals water (
			[then]
				[music]
					name=into_the_shadows.ogg
					immediate=yes
				[/music]
				{VARIABLE area water}
			[/then]
		)}
	[/event]
	
	# hot cave...
	[event]
		name=moveto
		first_time_only=no
		[filter]
			x="50-100"
			y="61-80"
			side=1
			canrecruit=yes
		[/filter]
		{IF_VAR area not_equals hot_cave (
			[then]
				[music]
					name=weight_of_revenge.ogg
					immediate=yes
				[/music]
				{VARIABLE area hot_cave}
			[/then]
		)}
	[/event]
	
	# lava cave...
	[event]
		name=moveto
		first_time_only=no
		[filter]
			x="1-100"
			y="81-100"
			side=1
			canrecruit=yes
		[/filter]
		{IF_VAR area not_equals lava_cave (
			[then]
				[music]
					name=the_deep_path.ogg
					immediate=yes
				[/music]
				{VARIABLE area lava_cave}
			[/then]
		)}
	[/event]
	
	# old ruins...
	[event]
		name=moveto
		first_time_only=no
		[filter]
			x="1-50"
			y="40-80"
			side=1
			canrecruit=yes
		[/filter]
		{IF_VAR area not_equals lava_cave (
			[then]
				[music]
					name=northern_mountains.ogg
					immediate=yes
				[/music]
				{VARIABLE area old_ruins}
			[/then]
		)}
	[/event]
	
	# collect upgrades...
	
	# hook...
	[event]
		name=moveto
		[filter]
			x,y=11,14
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE hook yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/sceptre-of-fire.png"
			name=_ "Hook"
			description=_ "This allows you to hold on to grabbable terrains. (The terrain that is grabbable is the encampment castle terrain.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=new_attack
				name=hook
				description=_ "hook"
				type=pierce
				icon=attacks/sickle.png
				range=ranged
				damage=0
				number=0
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# bolt cannon...
	[event]
		name=moveto
		[filter]
			x,y=69,58
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE bolt_cannon yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/sceptre-of-fire.png"
			name=_ "Bolt Cannon"
			description=_ "This allows you to shoot out a powerful bolt. (This deals pierce damage.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=new_attack
				name=bolt cannon
				description=_ "bolt cannon"
				type=pierce
				icon=attacks/dagger-thrown-human.png
				range=ranged
				damage=50
				number=1
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# rock cannon...
	[event]
		name=moveto
		[filter]
			x,y=88,59
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE rock_cannon yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/sceptre-of-fire.png"
			name=_ "Rock Cannon"
			description=_ "This allows you to shoot out a powerful rock. (This deals impact damage.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=new_attack
				name=rock cannon
				description=_ "rock cannon"
				type=impact
				icon=attacks/rock_thrown.png
				range=ranged
				damage=50
				number=1
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# water cannon...
	[event]
		name=moveto
		[filter]
			x,y=94,41
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE water_cannon yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/sceptre-of-fire.png"
			name=_ "Water Cannon"
			description=_ "This allows you to shoot out a powerful blast of water. (This deals cold damage.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=new_attack
				name=water cannon
				description=_ "water cannon"
				type=cold
				icon=attacks/iceball.png
				range=ranged
				damage=25
				number=1
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# lava cannon...
	[event]
		name=moveto
		[filter]
			x,y=53,85
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE lava_cannon yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/sceptre-of-fire.png"
			name=_ "Lava Cannon"
			description=_ "This allows you to shoot out a powerful blast of lava. (This deals fire damage.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=new_attack
				name=lava cannon
				description=_ "lava cannon"
				type=fire
				icon=attacks/fireball.png
				range=ranged
				damage=25
				number=1
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# boost...
	[event]
		name=moveto
		[filter]
			x,y=52,20
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE boost yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/brazier-lit1.png"
			name=_ "Rocket Booster"
			description=_ "This allows you to move faster than normal. (You can now move 8 hexes per turn.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=movement
				set=8
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# box...
	[event]
		name=moveto
		[filter]
			x,y=55,76
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE box yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/box.png"
			name=_ "Compression Box"
			description=_ "This allows you to move in small passageways. (You can now move though deep water and caves.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=movement_costs
				replace=yes
				[movement_costs]
					cave=1
					deep_water=1
				[/movement_costs]
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# elemental armor ...
	[event]
		name=moveto
		[filter]
			x,y=3,67
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE armor_a yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/armor-golden.png"
			name=_ "Elemental Armor"
			description=_ "This resists elemental damage. (50% resistance to cold, fire, and arcane.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=resistance
				replace=no
				[resistance]
					cold=50%
					fire=50%
					arcane=50%
				[/resistance]
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# weapon armor ...
	[event]
		name=moveto
		[filter]
			x,y=47,19
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE armor_b yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/armor.png"
			name=_ "Weapon Armor"
			description=_ "This resists weapon damage. (50% resistance to blade, pierce, and impact.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=resistance
				replace=no
				[resistance]
					blade=50%
					pierce=50%
					impact=50%
				[/resistance]
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# examine stuff menu items
	
	[event]
		name=prestart
		[set_menu_item]
			id=MAP_examine_enemy
			description=_ "Examine Enemy"
			image=misc/eye.png
			[show_if]
				[have_unit]
					side=2
					x,y=$unit.x|,$unit.y|
				[/have_unit]
			[/show_if]
			[command]
				{IF_VAR unit.type equals (Rubble Weak) (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This rubble looks very weak. It should be able to be cleared by a simple energy blast."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals (Rubble Average) (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This rubble looks somewhat unstable. However, a few elemental energy blasts should be able to be clear this rubble."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals (Rubble Strong) (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This rubble doesn't look like it's going anywhere soon. Although, maybe siege-like attacks could be able to be clear this rubble."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals (Rubble Epic) (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This rubble looks to strong to be damaged by conventional means. However, it seems that blade-like attacks is a weakness of this rubble."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals Zlap (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This flying, insect-like, creature has the ability to fly very quickly. They feed off any form of energy they can find. However, they cannot heal from the drained energy."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals Smlug (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This mud-like, slug seems to love living in water environments. It has the ability to regenerate in swamp environments as well. The Smlug likes to use mud as his weapon to keep threats away."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals Peko (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This four legged, spider-like, creature has a hard outer shell with small spikes. This creature looks very hard to damage due to the resistance it has. Even it's long legs are sharp as nails. Avoid combat whenever possible."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals Versant (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This snake-like, creature likes to live in jungle-like environments. They rarely attack unless approached. When they do attack, they spew out very unique chemicals."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals Harok (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This strange, rock-like, creature is very resistance to all attacks. However, he is slow and defenceless. If you want to continue down the path, you have to kill him."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals Sullif (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This fish-like, beast is very large in size. However, it's scales are very weak and vulnerable to any based attack. (Except cold.)"
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals Lavmar (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This flying, insect-like, creature is basically suicidal. They live within the lava of the planets core and attack anything that gets too close. Apon attacking, they self destruct. (Throwing lava and it's own body parts.)"
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals Guard (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This strange, mechanical statue seems to be guarding this location. He has long, sharp, sword-like claws on his hand. Extreme caution should be used when encountering."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
				{IF_VAR unit.type equals (Blade Guardian) (
					[then]
						[message]
							speaker=narrator
							image=$unit.image|
							message=_ "This strange, mechanical statue seems to be guarding this location. He has a long, sharp, sword-like blade equipped in his hand. It looks like the dragon statues seen around the planet. Extreme caution should be used when encountering the Blade Guardians."
							caption=_ "Examination Complete! (" + $unit.language_name| + " )"
						[/message]
					[/then]
				)}
			[/command]
		[/set_menu_item]
	[/event]
	
	# examine upgrade...
	
	[event]
		name=prestart
		[set_menu_item]
			id=MAP_examine_upgrade
			description=_ "Examine Upgrade"
			image=misc/eye.png
			[show_if]
				[have_location]
					x,y=$x1|,$y1|
					terrain=Co
				[/have_location]
			[/show_if]
			[command]
				[message]
					speaker=narrator
					message=_ "This appears to be some kind of upgradable item for you. Move to it to find out what ability/upgrade/weapon it is."
					caption=_ "Examination Complete! ( Upgrade )"
					image="terrain/castle/orcish/tile.png"
				[/message]
			[/command]
		[/set_menu_item]
	[/event]
	
	# examine lock...
	
	[event]
		name=prestart
		[set_menu_item]
			id=MAP_examine_mechanism
			description=_ "Examine Mechanism"
			image=misc/eye.png
			[show_if]
				[have_location]
					x,y=$x1|,$y1|
					terrain=Ch
				[/have_location]
			[/show_if]
			[command]
				[message]
					speaker=narrator
					message=_ "This appears to be some kind of locking mechanism. Move to it to unlock something inside the underground world."
					caption=_ "Examination Complete! ( Locking Mechanism )"
					image="terrain/castle/castle-tile.png"
				[/message]
			[/command]
		[/set_menu_item]
	[/event]
	
	# examine recharge machine...
	
	[event]
		name=prestart
		[set_menu_item]
			id=MAP_examine_machine
			description=_ "Examine Machine"
			image=misc/eye.png
			[show_if]
				[have_location]
					x,y=$x1|,$y1|
					terrain=Cud
				[/have_location]
			[/show_if]
			[command]
				[message]
					speaker=narrator
					message=_ "This appears to be some kind of recharging machine of some sort. Moving to it could recharge your energy cores."
					caption=_ "Examination Complete! ( Recharging Machine )"
					image="terrain/castle/dwarven-castle-tile.png"
				[/message]
			[/command]
		[/set_menu_item]
	[/event]
	
	# examine grabbable hook...
	
	[event]
		name=prestart
		[set_menu_item]
			id=MAP_examine_hook
			description=_ "Examine Hook"
			image=misc/eye.png
			[show_if]
				[have_location]
					x,y=$x1|,$y1|
					terrain=Ce
				[/have_location]
			[/show_if]
			[command]
				[message]
					speaker=narrator
					message=_ "This appears to be some kind of grabbable hook. If you move here with a hook-like device, you should be able to hold on to it."
					caption=_ "Examination Complete! ( Grabbable Hook )"
					image="terrain/castle/encampment-tile.png"
				[/message]
			[/command]
		[/set_menu_item]
	[/event]
	
	# examine guard statue...
	
	[event]
		name=prestart
		[set_menu_item]
			id=MAP_examine_statue
			description=_ "Examine Statue"
			image=misc/eye.png
			[show_if]
				[have_location]
					x,y=$x1|,$y1|
					terrain=Cv
				[/have_location]
			[/show_if]
			[command]
				[message]
					speaker=narrator
					message=_ "This appears to be some kind of statue; representing a race. It looks dragon-like in design. This means, intelligent life form(s) may exist on this planet."
					caption=_ "Examination Complete! ( Statue of a Race )"
					image="items/dragonstatue.png"
				[/message]
			[/command]
		[/set_menu_item]
	[/event]
	
	# examine guard statue...
	
	[event]
		name=prestart
		[set_menu_item]
			id=MAP_examine_tower
			description=_ "Examine Tower"
			image=misc/eye.png
			[show_if]
				[have_location]
					x,y=$x1|,$y1|
					terrain=Kv
				[/have_location]
			[/show_if]
			[command]
				[message]
					speaker=narrator
					message=_ "This appears to be some kind of tower; The guards like to hide within these towers."
					caption=_ "Examination Complete! ( Tower )"
					image="terrain/castle/elven/keep-tile.png"
				[/message]
			[/command]
		[/set_menu_item]
	[/event]
	
	# key macro...
	
#define PLACE_KEY MOVEXY TERRAINX TERRAINY
	[event]
		name=moveto
		[filter]
			x,y={MOVEXY}
		[/filter]
		[removeitem]
			x,y={MOVEXY}
		[/removeitem]
		{MODIFY_TERRAIN Re {TERRAINX} {TERRAINY}}
		[kill]
			x,y={TERRAINX},{TERRAINY}
		[/kill]
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
	[/event]
#enddef
	
	# ammo macro...
	
#define PLACE_AMMO XY
	[event]
		name=moveto
		[filter]
			x,y={XY}
			side=1
			canrecruit=yes
		[/filter]
		[removeitem]
			x,y={XY}
		[/removeitem]
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/chest-plain-open.png"
			name=_ "Bolt/Rock Ammo"
			description=_ "This gives you +5 ammo. (You can now shoot 5 extra rocks/bolts. However, they run out when used. Although, you will always have at least one.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=attack
				name=bolt cannon
				increase_attacks=5
			[/effect]
			[effect]
				apply_to=attack
				name=rock cannon
				increase_attacks=5
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
#enddef

#define PLACE_ENERGY XY
	[event]
		name=moveto
		[filter]
			x,y={XY}
			side=1
		[/filter]
		[removeitem]
			x,y={XY}
		[/removeitem]
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/ball-blue.png"
			name=_ "Energy Core"
			description=_ "This gives you +50 energy. (You now got +50 maximum hitpoints.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=hitpoints
				increase_total=50
				increase=50
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
#enddef
	
	# key a...
	{PLACE_KEY (1,6) 7 85}
	
	# key b...
	{PLACE_KEY (6,89) 5 85}
	
	# key c...
	{PLACE_KEY (79,3) 3 85}
	
	# ammo a...
	{PLACE_AMMO (19,23)}
	
	# ammo b...
	{PLACE_AMMO (96,3)}
	
	# ammo c...
	{PLACE_AMMO (1,20)}
	
	# ammo d...
	{PLACE_AMMO (72,42)}
	
	# ammo d...
	{PLACE_AMMO (1,71)}
	
	# energy a...
	{PLACE_ENERGY (47,2)}
	
	# energy b...
	{PLACE_ENERGY (19,6)}
	
	# energy c...
	{PLACE_ENERGY (66,35)}
	
	# energy d...
	{PLACE_ENERGY (100,46)}
	
	# energy e...
	{PLACE_ENERGY (83,62)}
	
	# energy f...
	{PLACE_ENERGY (85,94)}
	
	# energy g...
	{PLACE_ENERGY (2,94)}
	
	# energy h...
	{PLACE_ENERGY (51,59)}
	
	# energy i...
	{PLACE_ENERGY (59,11)}
	
	# spawn all the enemies...
	
	[event]
		name=prestart
		
		# ribble first...
		
		{UNIT 2 ("Rubble Weak") 20 3 (ai_special=guardian)}
		{UNIT 2 ("Rubble Weak") 50 9 (ai_special=guardian)}
		{UNIT 2 ("Rubble Epic") 41 17 (ai_special=guardian)}
		{UNIT 2 ("Rubble Weak") 28 16 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 4 17 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 20 38 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 28 38 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 28 27 (ai_special=guardian)}
		{UNIT 2 ("Rubble Strong") 20 21 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 28 20 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 50 38 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 66 38 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 82 38 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 66 29 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 58 22 (ai_special=guardian)}
		{UNIT 2 ("Rubble Weak") 99 18 (ai_special=guardian)}
		{UNIT 2 ("Rubble Strong") 54 61 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 67 69 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 84 69 (ai_special=guardian)}
		{UNIT 2 ("Rubble Strong") 67 78 (ai_special=guardian)}
		{UNIT 2 ("Rubble Strong") 98 81 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 50 93 (ai_special=guardian)}
		{UNIT 2 ("Rubble Strong") 16 80 (ai_special=guardian)}
		{UNIT 2 ("Rubble Average") 32 80 (ai_special=guardian)}
		{UNIT 2 ("Rubble Strong") 16 71 (ai_special=guardian)}
		{UNIT 2 ("Rubble Strong") 4 40 (ai_special=guardian)}
		{UNIT 2 ("Rubble Strong") 46 59 (ai_special=guardian)}
		{UNIT 2 ("Lock") 3 85 (ai_special=guardian)}
		{UNIT 2 ("Lock") 5 85 (ai_special=guardian)}
		{UNIT 2 ("Lock") 7 85 (ai_special=guardian)}
		
		# enemies now...
		
		{UNIT 2 ("Smlug") 10 6 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 15 1 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 22 1 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 29 1 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 39 1 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 33 11 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 18 16 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 20 16 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 6 14 (ai_special=guardian)}
		{UNIT 2 ("Peko") 9 38 (ai_special=guardian)}
		{UNIT 2 ("Peko") 14 33 (ai_special=guardian)}
		{UNIT 2 ("Versant") 13 21 (ai_special=guardian)}
		{UNIT 2 ("Peko") 24 24 (ai_special=guardian)}
		{UNIT 2 ("Versant") 22 31 (ai_special=guardian)}
		{UNIT 2 ("Harok") 47 23 (ai_special=guardian)}
		{UNIT 2 ("Harok") 33 33 (ai_special=guardian)}
		{UNIT 2 ("Harok") 47 35 (ai_special=guardian)}
		{UNIT 2 ("Harok") 70 30 (ai_special=guardian)}
		{UNIT 2 ("Harok") 34 24 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 67 5 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 79 5 (ai_special=guardian)}
		{UNIT 2 ("Zlap") 100 7 (ai_special=guardian)}
		{UNIT 2 ("Sullif") 54 12 (ai_special=guardian)}
		{UNIT 2 ("Sullif") 65 13 (ai_special=guardian)}
		{UNIT 2 ("Sullif") 72 12 (ai_special=guardian)}
		{UNIT 2 ("Sullif") 89 14 (ai_special=guardian)}
		{UNIT 2 ("Sullif") 99 15 (ai_special=guardian)}
		{UNIT 2 ("Sullif") 90 48 (ai_special=guardian)}
		{UNIT 2 ("Sullif") 88 57 (ai_special=guardian)}
		{UNIT 2 ("Sullif") 76 47 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 67 59 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 71 59 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 52 48 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 33 38 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 72 37 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 75 38 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 74 29 (ai_special=guardian)}
		{UNIT 2 ("Smlug") 77 29 (ai_special=guardian)}
		{UNIT 2 ("Peko") 89 37 (ai_special=guardian)}
		{UNIT 2 ("Versant") 95 30 (ai_special=guardian)}
		{UNIT 2 ("Harok") 75 24 (ai_special=guardian)}
		{UNIT 2 ("Peko") 53 26 (ai_special=guardian)}
		{UNIT 2 ("Versant") 61 22 (ai_special=guardian)}
		{UNIT 2 ("Peko") 65 32 (ai_special=guardian)}
		{UNIT 2 ("Guard") 10 75 (ai_special=guardian)}
		{UNIT 2 ("Guard") 28 73 (ai_special=guardian)}
		{UNIT 2 ("Guard") 46 75 (ai_special=guardian)}
		{UNIT 2 ("Guard") 44 66 (ai_special=guardian)}
		{UNIT 2 ("Guard") 23 63 (ai_special=guardian)}
		{UNIT 2 ("Guard") 13 54 (ai_special=guardian)}
		{UNIT 2 ("Guard") 12 44 (ai_special=guardian)}
		{UNIT 2 ("Guard") 19 40 (ai_special=guardian)}
		{UNIT 2 ("Guard") 25 47 (ai_special=guardian)}
		{UNIT 2 ("Guard") 26 56 (ai_special=guardian)}
		{UNIT 2 ("Guard") 30 40 (ai_special=guardian)}
		{UNIT 2 ("Guard") 39 54 (ai_special=guardian)}
		{UNIT 2 ("Guard") 41 46 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 62 69 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 75 69 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 92 69 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 77 78 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 89 91 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 79 92 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 65 91 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 57 91 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 40 87 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 31 90 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 21 88 (ai_special=guardian)}
		{UNIT 2 ("Lavmar") 11 100 (ai_special=guardian)}
		{UNIT 2 ("Blade Guardian") 41 58 (ai_special=guardian)}
		
	[/event]
	
	# rubble deaths...
	
	[event]
		name=die
		first_time_only=no
		[filter]
			side=2
			type="Rubble Weak", "Rubble Average", "Rubble Strong", "Rubble Epic"
		[/filter]
		{MODIFY_TERRAIN Rr $x1| $y1|}
	[/event]
	
	# teleport first if possible...
	# this MUST come before gravity or it will never trigger...
	
	[event]
		name=moveto
		[filter]
			x,y=48,40
			canrecruit=yes
			side=1
		[/filter]
		{TELEPORT_UNIT (side=1 canrecruit=yes) 49 17}
		[scroll_to]
			x,y=49,17
		[/scroll_to]
	[/event]
	
	# setup gravity movement...
	
	[event]
		name=moveto,attack end
		first_time_only=no
		[filter]
			side=1,2
			type="Android", "Smlug", "Peko", "Versant", "Harok"
		[/filter]
		[while]
			[have_location]
				x,y=$unit.x,$unit.y
				[not]
					terrain=Ce,Ce^li
					[filter]
						side=1,2
						has_weapon=hook
					[/filter]
				[/not]
				[filter_adjacent_location]
					adjacent=s
					[not]
						terrain=Xu,Xos
					[/not]
					[not]
						[filter]
							side=1,2
						[/filter]
					[/not]
				[/filter_adjacent_location]
			[/have_location]
			[do]
				[kill]
					x,y=$unit.x,$unit.y
				[/kill]
				{VARIABLE_OP unit.y add 1}
				[unstore_unit]
					variable=unit
					find_vacant=no
				[/unstore_unit]
				[store_locations]
					x=$unit.x|
					y=$unit.y|
					variable=ter
				[/store_locations]
				[sound]
					name=dagger-swish.wav
				[/sound]
				{IF_VAR ter.terrain equals Ce (
					[then]
						{IF_VAR hook equals yes (
							[then]
								[sound]
									name=dart.wav
								[/sound]
							[/then]
						)}
					[/then]
				)}
				{IF_VAR ter.terrain equals Ww (
					[then]
						[sound]
							name=water-blast.wav
						[/sound]
					[/then]
				)}
				{IF_VAR ter.terrain equals Ss (
					[then]
						[sound]
							name=water-blast.wav
						[/sound]
					[/then]
				)}
				{IF_VAR ter.terrain equals Qlf (
					[then]
						[sound]
							name=fire.wav
						[/sound]
						[kill]
							side=1
							canrecruit=yes
							fire_event=yes
						[/kill]
					[/then]
				)}
				{IF_VAR ter.terrain equals Cud (
					[then]
						{IF_VAR unit.hitpoints not_equals $unit.max_hitpoints| (
							[then]
								[sound]
									name=lightning-miss.ogg
								[/sound]
								[kill]
									x,y=$unit.x,$unit.y
								[/kill]
								{VARIABLE unit.hitpoints $unit.max_hitpoints|}
								[unstore_unit]
									variable=unit
									find_vacant=no
								[/unstore_unit]
								[message]
									speaker=narrator
									message=_ "You are fully healed from the recharge machine."
								[/message]
							[/then]
						)}
					[/then]
				)}
			[/do]
		[/while]
		[store_locations]
			x=$unit.x|
			y=$unit.y|
			variable=ter
		[/store_locations]
		{IF_VAR ter.terrain equals Cud (
			[then]
				{IF_VAR unit.hitpoints not_equals $unit.max_hitpoints| (
					[then]
						[sound]
							name=lightning-miss.ogg
						[/sound]
						[kill]
							x,y=$unit.x,$unit.y
						[/kill]
						{VARIABLE unit.hitpoints $unit.max_hitpoints|}
						[unstore_unit]
							variable=unit
							find_vacant=no
						[/unstore_unit]
						[message]
							speaker=narrator
							message=_ "You are fully healed from the recharge machine."
						[/message]
					[/then]
				)}
			[/then]
		)}
		{IF_VAR ter.terrain not_equals Ce (
			[then]
				[sound]
					name=club.ogg
				[/sound]
			[/then]
			[else]
				{IF_VAR hook equals yes (
					[then]
						[sound]
							name=dart.wav
						[/sound]
					[/then]
				)}
			[/else]
		)}
	[/event]
	
	# ammo use up...
	
	[event]
		name=attacker hits,attacker misses
		first_time_only=no
		[filter]
			side=1
			canrecruit=yes
		[/filter]
		[filter_attack]
			name=bolt cannon
		[/filter_attack]
		[object]
			duration=forever
			silent=yes
			image="items/chest-plain-open.png"
			name=_ "Bolt Ammo"
			description=_ "You used up a bolt. Add -1 to attacks."
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=attack
				name=bolt cannon
				increase_attacks=-1
			[/effect]
		[/object]
	[/event]
	
	[event]
		name=defender hits, defender misses
		first_time_only=no
		[filter_second]
			side=1
			canrecruit=yes
		[/filter_second]
		[filter_attack]
			name=bolt cannon
		[/filter_attack]
		[object]
			duration=forever
			silent=yes
			image="items/chest-plain-open.png"
			name=_ "Bolt Ammo"
			description=_ "You used up a bolt. Add -1 to attacks."
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=attack
				name=bolt cannon
				increase_attacks=-1
			[/effect]
		[/object]
	[/event]
	
	[event]
		name=attacker hits,attacker misses
		first_time_only=no
		[filter]
			side=1
			canrecruit=yes
		[/filter]
		[filter_attack]
			name=rock cannon
		[/filter_attack]
		[object]
			duration=forever
			silent=yes
			image="items/chest-plain-open.png"
			name=_ "Rock Ammo"
			description=_ "You used up a rock. Add -1 to attacks."
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=attack
				name=rock cannon
				increase_attacks=-1
			[/effect]
		[/object]
	[/event]
	
	[event]
		name=defender hits, defender misses
		first_time_only=no
		[filter_second]
			side=1
			canrecruit=yes
		[/filter_second]
		[filter_attack]
			name=rock cannon
		[/filter_attack]
		[object]
			duration=forever
			silent=yes
			image="items/chest-plain-open.png"
			name=_ "Rock Ammo"
			description=_ "You used up a bolt. Add -1 to attacks."
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=attack
				name=rock cannon
				increase_attacks=-1
			[/effect]
		[/object]
	[/event]
	
	# refresh android...
	
	[event]
		name=attack end
		[filter]
			side=1
			canrecruit=yes
		[/filter]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
	# every new turn, the android is drained of 2 energy...
	# edit, we also need to reset the xp too. the enemies don't attack because of this...
	
	[event]
		name=side turn
		first_time_only=no
		{VARIABLE dead no}
		{IF_VAR side_number equals 1 (
			[then]
				[store_unit]
					[filter]
						side=1
						canrecruit=yes
					[/filter]
					kill=yes
					variable=hero
				[/store_unit]
				{VARIABLE_OP hero.hitpoints sub 2}
				{VARIABLE hero.experience 0}
				{IF_VAR hero.hitpoints less_than_equal_to 0 (
					[then]
						{VARIABLE dead yes}
					[/then]
				)}
				[unstore_unit]
					variable=hero
				[/unstore_unit]
			[/then]
		)}
		{IF_VAR dead equals yes (
			[then]
				[kill]
					side=1
					canrecruit=yes
					fire_event=yes
					animate=yes
				[/kill]
			[/then]
		)}
	[/event]
	
	# special enemy case... lavmar...	
	# self destruct hits...
	
	[event]
		name=attacker hits
		first_time_only=no
		[filter]
			side=2
			type=Lavmar
		[/filter]
		[filter_attack]
			name=self destruct
		[/filter_attack]
		[kill]
			x,y=$unit.x|,$unit.y|
			animate=yes
			fire_event=yes
		[/kill]
	[/event]
	
	# final boss trigger...
	
	[event]
		name=moveto
		[filter]
			x="6-20"
			y="40-59"
			side=1
			canrecruit=yes
		[/filter]
		{MODIFY_TERRAIN Xos (5,28,50) (57,16,9)}
		{VARIABLE escape yes}
		{UNIT 2 ("Lock") 5 57 (ai_special=guardian)}
		{UNIT 2 ("Lock") 28 16 (ai_special=guardian)}
		{UNIT 2 ("Lock") 50 9 (ai_special=guardian)}
		[message]
			speaker=narrator
			message=_ "Intruder detected... Activating Blade Guardian... Task complete... Activating lock down mode... Task complete..."
		[/message]
	[/event]
	
	# final boss trigger...
	
	[event]
		name=moveto
		[filter]
			x="1-8"
			y="1-4"
			side=1
			canrecruit=yes
		[/filter]
		{IF_VAR escape equals yes (
			[then]
				[message]
					side=1
					canrecruit=yes
					message=_ "Falcon XVI, I am returning to the ship... It seems that there is intelligent life forms here... However, all of them became hostile toward me... I acquired a lot of data from this race... I will inform you once I arrive."
				[/message]
				[message]
					speaker=narrator
					caption=_ "Falcon XVI"
					message=_ "Acknowledged."
				[/message]
				[endlevel]
					result=victory
				[/endlevel]
			[/then]
		)}
	[/event]
	
	# android dies...
	
	[event]
		name=die
		[filter]
			side=1
			canrecruit=yes
		[/filter]
		[sound]
			name=explosion.ogg
		[/sound]
		[message]
			canrecruit=yes
			side=1
			message=_ "Energy supply failure... Self Destruct activated!"
		[/message]
		[endlevel]
			result=defeat
		[/endlevel]
	[/event]
	
	# boss dies...
	
	# long blade create...
	[event]
		name=die
		[filter]
			type="Blade Guardian"
			side=2
		[/filter]
		[item]
			x,y=41,58
			image=items/sceptre-of-fire.png
		[/item]
		[message]
			speaker=narrator
			message=_ "Blade Guardian destroyed... Results... Impossible... Error... Error... Warning... System shutting down..."
		[/message]
	[/event]
	
	# long blade...
	[event]
		name=moveto
		[filter]
			x,y=41,58
			side=1
		[/filter]
		[removeitem]
			x,y=$x1|,$y1|
		[/removeitem]
		{VARIABLE long_blade yes}
		[sound]
			name=horn-signals/horn-1.ogg
		[/sound]
		[object]
			duration=forever
			image="items/sceptre-of-fire.png"
			name=_ "Long Blade"
			description=_ "This allows you to shoot swing a long, powerful, sword. (This deals blade damage.)"
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			[effect]
				apply_to=new_attack
				name=long blade
				description=_ "long blade"
				type=blade
				icon=attacks/greatsword-elven.png
				range=melee
				damage=50
				number=1
			[/effect]
		[/object]
		[store_unit]
			[filter]
				side=1
				canrecruit=yes
			[/filter]
			kill=yes
			variable=hero
		[/store_unit]
		[unstore_unit]
			variable=hero
		[/unstore_unit]
		[redraw]
		[/redraw]
	[/event]
	
[/scenario]